{% extends "base.html" %}

{% block title %}CEU Monitor - Áreas{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* ========== Página de Áreas - Design Moderno ========== */

/* Header da Página */
.page-header {
    margin-bottom: 30px;
}

.page-header h2 {
    font-size: 28px;
    color: #2c3e50;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 12px;
}

.page-header p {
    color: #7f8c8d;
    font-size: 15px;
}

/* Grid de Áreas */
.areas-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 25px;
    margin-bottom: 30px;
}

/* Cards de Área com Gradientes */
.area-card {
    background: white;
    border-radius: 16px;
    padding: 25px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    border-left: 5px solid;
}

.area-card::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 120px;
    height: 120px;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    border-radius: 50%;
    transform: translate(30%, -30%);
}

.area-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12);
}

/* Cores por Área */
.area-card.pool { border-left-color: #3498db; }
.area-card.auditorium { border-left-color: #9b59b6; }
.area-card.multiuse { border-left-color: #e74c3c; }
.area-card.sports { border-left-color: #f39c12; }
.area-card.library { border-left-color: #1abc9c; }
.area-card.social { border-left-color: #e67e22; }

/* Header do Card */
.area-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.area-title {
    font-size: 20px;
    font-weight: 700;
    color: #2c3e50;
    display: flex;
    align-items: center;
    gap: 10px;
}

.area-icon {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    color: white;
}

.area-icon.pool { background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); }
.area-icon.auditorium { background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%); }
.area-icon.multiuse { background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); }
.area-icon.sports { background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%); }
.area-icon.library { background: linear-gradient(135deg, #1abc9c 0%, #16a085 100%); }
.area-icon.social { background: linear-gradient(135deg, #e67e22 0%, #d35400 100%); }

/* Ocupação */
.area-occupation {
    text-align: center;
    margin: 25px 0;
}

.occupation-circle {
    width: 120px;
    height: 120px;
    margin: 0 auto 15px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 32px;
    font-weight: 700;
    color: white;
    position: relative;
    background: conic-gradient(
        from 0deg,
        var(--gradient-start) 0%,
        var(--gradient-end) var(--percentage),
        #ecf0f1 var(--percentage) 100%
    );
}

.occupation-inner {
    width: 100px;
    height: 100px;
    background: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    font-weight: 700;
    color: #2c3e50;
}

.occupation-label {
    font-size: 14px;
    color: #7f8c8d;
    margin-bottom: 5px;
}

.occupation-details {
    font-size: 13px;
    color: #95a5a6;
}

/* Status Badge */
.status-badge {
    display: inline-block;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    margin-top: 10px;
}

.status-badge.normal {
    background: #d4edda;
    color: #155724;
}

.status-badge.warning {
    background: #fff3cd;
    color: #856404;
}

.status-badge.danger {
    background: #f8d7da;
    color: #721c24;
}

.status-badge.low {
    background: #d1ecf1;
    color: #0c5460;
}

/* Estatísticas da Área */
.area-stats {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid #ecf0f1;
}

.stat-box {
    text-align: center;
    padding: 12px;
    background: #f8f9fa;
    border-radius: 10px;
    transition: all 0.3s;
}

.stat-box:hover {
    background: #e9ecef;
    transform: scale(1.05);
}

.stat-box-value {
    font-size: 24px;
    font-weight: 700;
    color: #2c3e50;
    margin-bottom: 5px;
}

.stat-box-label {
    font-size: 12px;
    color: #7f8c8d;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Resumo Geral */
.areas-summary {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.summary-card {
    background: white;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
    text-align: center;
}

.summary-icon {
    width: 60px;
    height: 60px;
    margin: 0 auto 15px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    color: white;
}

.summary-icon.total { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
.summary-icon.active { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); }
.summary-icon.avg { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
.summary-icon.peak { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }

.summary-value {
    font-size: 28px;
    font-weight: 700;
    color: #2c3e50;
    margin-bottom: 5px;
}

.summary-label {
    font-size: 13px;
    color: #7f8c8d;
}

/* Gráfico */
.chart-section {
    background: white;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
    margin-bottom: 20px;
}

.chart-section h3 {
    font-size: 18px;
    color: #2c3e50;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.chart-container-areas {
    height: 350px;
    position: relative;
}
</style>
{% endblock %}

{% block content %}
<!-- Header da Página -->
<div class="page-header">
    <h2>
        <i class="fas fa-map-marked-alt"></i>
        Monitoramento por Áreas
    </h2>
    <p>Visão detalhada da ocupação e fluxo de pessoas em cada área do CEU</p>
</div>

<!-- Resumo Geral -->
<div class="areas-summary">
    <div class="summary-card">
        <div class="summary-icon total">
            <i class="fas fa-layer-group"></i>
        </div>
        <div class="summary-value" id="total-areas">6</div>
        <div class="summary-label">Total de Áreas</div>
    </div>

    <div class="summary-card">
        <div class="summary-icon active">
            <i class="fas fa-check-circle"></i>
        </div>
        <div class="summary-value" id="active-areas">6</div>
        <div class="summary-label">Áreas Ativas</div>
    </div>

    <div class="summary-card">
        <div class="summary-icon avg">
            <i class="fas fa-chart-line"></i>
        </div>
        <div class="summary-value" id="avg-occupation">--</div>
        <div class="summary-label">Ocupação Média</div>
    </div>

    <div class="summary-card">
        <div class="summary-icon peak">
            <i class="fas fa-fire"></i>
        </div>
        <div class="summary-value" id="peak-area">--</div>
        <div class="summary-label">Área com Maior Fluxo</div>
    </div>
</div>

<!-- Grid de Áreas -->
<div class="areas-grid">
    <!-- Piscinas -->
    <div class="area-card pool">
        <div class="area-header">
            <div class="area-title">
                <div class="area-icon pool">
                    <i class="fas fa-swimming-pool"></i>
                </div>
                <span>Piscinas</span>
            </div>
        </div>
        <div class="area-occupation">
            <div class="occupation-circle" style="--percentage: 68%; --gradient-start: #3498db; --gradient-end: #2980b9;">
                <div class="occupation-inner">68%</div>
            </div>
            <div class="occupation-label">Ocupação Atual</div>
            <div class="occupation-details">42 de 60 pessoas</div>
            <span class="status-badge warning">Quase na capacidade</span>
        </div>
        <div class="area-stats">
            <div class="stat-box">
                <div class="stat-box-value" id="pool-entries">28</div>
                <div class="stat-box-label">Entradas Hoje</div>
            </div>
            <div class="stat-box">
                <div class="stat-box-value" id="pool-avg-time">2.3h</div>
                <div class="stat-box-label">Tempo Médio</div>
            </div>
        </div>
    </div>

    <!-- Auditórios -->
    <div class="area-card auditorium">
        <div class="area-header">
            <div class="area-title">
                <div class="area-icon auditorium">
                    <i class="fas fa-users"></i>
                </div>
                <span>Auditórios</span>
            </div>
        </div>
        <div class="area-occupation">
            <div class="occupation-circle" style="--percentage: 35%; --gradient-start: #9b59b6; --gradient-end: #8e44ad;">
                <div class="occupation-inner">35%</div>
            </div>
            <div class="occupation-label">Ocupação Atual</div>
            <div class="occupation-details">52 de 150 pessoas</div>
            <span class="status-badge normal">Dentro do normal</span>
        </div>
        <div class="area-stats">
            <div class="stat-box">
                <div class="stat-box-value" id="auditorium-entries">3</div>
                <div class="stat-box-label">Entradas Hoje</div>
            </div>
            <div class="stat-box">
                <div class="stat-box-value" id="auditorium-avg-time">1.8h</div>
                <div class="stat-box-label">Tempo Médio</div>
            </div>
        </div>
    </div>

    <!-- Salas Multiuso -->
    <div class="area-card multiuse">
        <div class="area-header">
            <div class="area-title">
                <div class="area-icon multiuse">
                    <i class="fas fa-chalkboard-teacher"></i>
                </div>
                <span>Salas Multiuso</span>
            </div>
        </div>
        <div class="area-occupation">
            <div class="occupation-circle" style="--percentage: 55%; --gradient-start: #e74c3c; --gradient-end: #c0392b;">
                <div class="occupation-inner">55%</div>
            </div>
            <div class="occupation-label">Ocupação Atual</div>
            <div class="occupation-details">33 de 60 pessoas</div>
            <span class="status-badge normal">Operação normal</span>
        </div>
        <div class="area-stats">
            <div class="stat-box">
                <div class="stat-box-value" id="multiuse-entries">7</div>
                <div class="stat-box-label">Entradas Hoje</div>
            </div>
            <div class="stat-box">
                <div class="stat-box-value" id="multiuse-avg-time">2.1h</div>
                <div class="stat-box-label">Tempo Médio</div>
            </div>
        </div>
    </div>

    <!-- Quadras Esportivas -->
    <div class="area-card sports">
        <div class="area-header">
            <div class="area-title">
                <div class="area-icon sports">
                    <i class="fas fa-basketball-ball"></i>
                </div>
                <span>Quadras Esportivas</span>
            </div>
        </div>
        <div class="area-occupation">
            <div class="occupation-circle" style="--percentage: 45%; --gradient-start: #f39c12; --gradient-end: #e67e22;">
                <div class="occupation-inner">45%</div>
            </div>
            <div class="occupation-label">Ocupação Atual</div>
            <div class="occupation-details">28 de 60 pessoas</div>
            <span class="status-badge normal">Operação normal</span>
        </div>
        <div class="area-stats">
            <div class="stat-box">
                <div class="stat-box-value" id="sports-entries">5</div>
                <div class="stat-box-label">Entradas Hoje</div>
            </div>
            <div class="stat-box">
                <div class="stat-box-value" id="sports-avg-time">1.5h</div>
                <div class="stat-box-label">Tempo Médio</div>
            </div>
        </div>
    </div>

    <!-- Biblioteca -->
    <div class="area-card library">
        <div class="area-header">
            <div class="area-title">
                <div class="area-icon library">
                    <i class="fas fa-book"></i>
                </div>
                <span>Biblioteca</span>
            </div>
        </div>
        <div class="area-occupation">
            <div class="occupation-circle" style="--percentage: 22%; --gradient-start: #1abc9c; --gradient-end: #16a085;">
                <div class="occupation-inner">22%</div>
            </div>
            <div class="occupation-label">Ocupação Atual</div>
            <div class="occupation-details">15 de 70 pessoas</div>
            <span class="status-badge low">Baixa ocupação</span>
        </div>
        <div class="area-stats">
            <div class="stat-box">
                <div class="stat-box-value" id="library-entries">42</div>
                <div class="stat-box-label">Entradas Hoje</div>
            </div>
            <div class="stat-box">
                <div class="stat-box-value" id="library-avg-time">0.8h</div>
                <div class="stat-box-label">Tempo Médio</div>
            </div>
        </div>
    </div>

    <!-- Área de Convivência -->
    <div class="area-card social">
        <div class="area-header">
            <div class="area-title">
                <div class="area-icon social">
                    <i class="fas fa-coffee"></i>
                </div>
                <span>Área de Convivência</span>
            </div>
        </div>
        <div class="area-occupation">
            <div class="occupation-circle" style="--percentage: 38%; --gradient-start: #e67e22; --gradient-end: #d35400;">
                <div class="occupation-inner">38%</div>
            </div>
            <div class="occupation-label">Ocupação Atual</div>
            <div class="occupation-details">25 de 65 pessoas</div>
            <span class="status-badge normal">Dentro do normal</span>
        </div>
        <div class="area-stats">
            <div class="stat-box">
                <div class="stat-box-value" id="social-entries">68</div>
                <div class="stat-box-label">Entradas Hoje</div>
            </div>
            <div class="stat-box">
                <div class="stat-box-value" id="social-avg-time">0.5h</div>
                <div class="stat-box-label">Tempo Médio</div>
            </div>
        </div>
    </div>
</div>

<!-- Gráfico de Ocupação -->
<div class="chart-section">
    <h3>
        <i class="fas fa-chart-bar"></i>
        Histórico de Ocupação por Área - Últimas 24h
    </h3>
    <div class="chart-container-areas">
        <canvas id="occupationByAreaChart"></canvas>
    </div>
</div>
{% endblock %}
